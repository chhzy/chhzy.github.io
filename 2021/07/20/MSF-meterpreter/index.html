<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>MSF--meterpreter | Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="碰到powershell无法执行脚本的情况:   执行脚本权限（策略）  Restricted    受限制  allsigned      已分配  Unrestricted 不受限制  remotesigned 远程分配  查看执行策略  Get-ExecutionPolicy   修改执行策略(需要管理员)  Set-ExecutionPolicy unrestricted  绕过执行">
<meta property="og:type" content="article">
<meta property="og:title" content="MSF--meterpreter">
<meta property="og:url" content="http://yoursite.com/2021/07/20/MSF-meterpreter/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="碰到powershell无法执行脚本的情况:   执行脚本权限（策略）  Restricted    受限制  allsigned      已分配  Unrestricted 不受限制  remotesigned 远程分配  查看执行策略  Get-ExecutionPolicy   修改执行策略(需要管理员)  Set-ExecutionPolicy unrestricted  绕过执行">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2021-07-20T12:12:07.000Z">
<meta property="article:modified_time" content="2021-07-24T01:08:04.646Z">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 5.0.2"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-MSF-meterpreter" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2021/07/20/MSF-meterpreter/" class="article-date">
  <time datetime="2021-07-20T12:12:07.000Z" itemprop="datePublished">2021-07-20</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      MSF--meterpreter
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>  碰到powershell无法执行脚本的情况:</p>
<p>  执行脚本权限（策略）</p>
<ul>
<li><p>Restricted    受限制</p>
</li>
<li><p>allsigned      已分配</p>
</li>
<li><p>Unrestricted 不受限制</p>
</li>
<li><p>remotesigned 远程分配</p>
</li>
<li><p>查看执行策略</p>
<ul>
<li>Get-ExecutionPolicy</li>
</ul>
</li>
<li><p>修改执行策略(需要管理员)</p>
<ul>
<li>Set-ExecutionPolicy unrestricted</li>
</ul>
<p>绕过执行策略:powershell -exec bypass -c comannd</p>
<p>创建文件:copy con filename</p>
<p>con:进入到编辑模式</p>
<p>修改属性:attrib</p>
<p>使用Attrib +s +a +h +r命令就是把原本的文件夹增加了系统文件属性、存档文件属性、只读文件属性和隐藏文件属性。attrib +s +a +h +r D:\test\project\test .txt。这样就做到了真正的隐藏，不管你是否显示隐藏文件，此文件夹都看不见。</p>
<p>创建文件:fsutil file createnew  filename size</p>
</li>
</ul>
</blockquote>
<h2 id="meterpreter"><a href="#meterpreter" class="headerlink" title="meterpreter"></a>meterpreter</h2><h5 id="两种session"><a href="#两种session" class="headerlink" title="两种session:"></a>两种session:</h5><p>​    Command shell session    –&gt; 就是cmd</p>
<p>​    meterpreter session            –&gt; 返回meterpreter</p>
<p>​                        </p>
<h5 id="指令"><a href="#指令" class="headerlink" title="指令:"></a>指令:</h5><p>​    jobs                                      查看工作</p>
<p>​    jobs -k id                           杀死只当的工作,-k kill</p>
<p>​    jobs -K                                 杀死所有的工作</p>
<p>​    session                                 查看连接到的会话</p>
<p>​    session -k id                        杀死指定的session</p>
<p>​    session -K                            杀死所有的session</p>
<p>​    run -j                                         放到后台监听</p>
<p>​    run -z                                        连接到了不会立马进入到交互模式</p>
<h5 id="meterpreter-1"><a href="#meterpreter-1" class="headerlink" title="meterpreter:"></a>meterpreter:</h5><p>​    getuid                                         查看当前用户</p>
<p>​    sysinfo                                        查看当前系统的基本信息</p>
<p>​    getpid                                         获取当前木马的pid</p>
<p>​    getsid                                         获取sid  </p>
<p>​    getsystem                                 获取管理员权限(初步提权,成功说明提权成功)</p>
<p>​    bg | background                    返回控制台</p>
<p>​    exit                                                退出当前session(关闭)</p>
<p>会话迁移: payload注入到新的进程当中,确保连接的稳定性</p>
<p>migrate    pid                                会话迁移</p>
<p>hashdump                                    下载sam文件中的账号密码信息</p>
<p>play                                                    播放.wav的文件</p>
<p>Webcam Commands:</p>
<p>webcam_stream                            查看摄像头(相当于监控)</p>
<p>webcam_list                                    列出有多少个摄像头</p>
<p>webcam_snap                                对摄像头做截屏</p>
<p>User interface Commands:</p>
<p>keyscan_dump                                下载键盘记录</p>
<p>keyscan_start                                    开启键盘监听</p>
<p>keyscan_stop                                    停止键盘监听</p>
<p>screenshare                                        看对方的电脑桌面(实时的,有延迟),以html文件的方式</p>
<p>run vnc                                                    看对方的电脑桌面(实时的,有延迟),以弹框的方式</p>
<p>screenshot                                            屏幕截图</p>
<p>uictl [enable/disable] [keyboard/mouse/all]    对键盘鼠标进行控制(禁用或者开启)</p>
<p><strong>clearev</strong>                    清除痕迹(系统日志,安全日志,应用日志)(前提有特权,才能清除的干净)</p>
<p>steal_token                                            身份盗用</p>
<p>rev2self                                                        返还身份</p>
<p> shutdown                                                关机</p>
<p><strong>shell</strong>                                                            进入到cmd或者进入到bash</p>
<p>kill    pid                                                    杀死进程</p>
<p>execute <code>-i -H  -f cmd</code>                            执行指令                </p>
<p>upload    local_file     remote_path                上传文件            </p>
<p>download remote_file local_path\save_filename                 下载文件</p>
<p>show_mount                                             磁盘信息</p>
<p>Core Commands:</p>
<p>background | bg                                    返回控制台</p>
<p>get_timeouts                                            获取session超时时间</p>
<p>linux:.elf,.sh</p>
<p>linux执行文件:</p>
<p>./ —&gt; 有可执行的权限,chmod u+x file —&gt; ./file</p>
<p>bash file</p>
<p>windows:bat,exe,hta</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2021/07/20/MSF-meterpreter/" data-id="ckte2as7g00016wvj3mzxewq9" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2021/07/24/meterpreter%E4%B8%8E%E6%8F%90%E6%9D%83/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          meterpreter与提权
        
      </div>
    </a>
  
  
    <a href="/2021/07/18/MSF%E5%9F%BA%E7%A1%80/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">MSF基础</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/09/">September 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/08/">August 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">July 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">August 2020</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2021/09/10/%E7%BD%91%E7%AB%99%E6%95%B0%E6%8D%AE%E5%8C%85%E7%BB%93%E6%9E%84%E5%88%86%E6%9E%90/">网站数据包结构分析</a>
          </li>
        
          <li>
            <a href="/2021/09/07/WEB%E5%AE%89%E5%85%A8%E5%9F%BA%E7%A1%80/">WEB安全基础</a>
          </li>
        
          <li>
            <a href="/2021/09/04/%E6%A8%AA%E5%90%91%E7%A7%BB%E5%8A%A8/">横向移动</a>
          </li>
        
          <li>
            <a href="/2021/09/02/%E9%BB%84%E9%87%91%E7%A5%A8%E6%8D%AE/">黄金票据</a>
          </li>
        
          <li>
            <a href="/2021/08/31/%E5%9F%9F%E6%B8%97%E9%80%8F%E5%9F%BA%E7%A1%80/">域渗透基础</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2021 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>